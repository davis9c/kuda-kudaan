<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Viewer 1728 Knight 5x5 Routes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        #board {
            display: grid;
            grid-template-columns: repeat(5, 60px);
            grid-template-rows: repeat(5, 60px);
            gap: 4px;
        }

        .cell {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: bold;
            border-radius: 6px;
            color: white;
        }

        .dark {
            background: #4a4a4a;
        }

        .light {
            background: #777;
        }
    </style>
</head>

<body class="bg-dark text-light">

    <div class="container py-4">
        <h2 class="mb-4 text-warning">Viewer Rute Knight 5Ã—5 (1728 Rute)</h2>

        <div class="row">
            <div class="col-md-4">
                <label class="form-label">Pilih Kelompok:</label>
                <select id="groupSelect" class="form-select mb-3">
                    <option value="">-- pilih --</option>
                    <option value="corner">Corner</option>
                    <option value="mid_edge">Mid Edge</option>
                    <option value="mid_corner">Mid Corner</option>
                    <option value="center">Center</option>
                </select>

                <label class="form-label">Pilih Nomor Rute:</label>
                <select id="routeSelect" class="form-select mb-3" disabled></select>

            </div>

            <div class="col-md-8">
                <h5 class="text-info">Visualisasi Papan</h5>
                <div id="board"></div>
            </div>
        </div>
    </div>

    <script>
        let DATA = {};

        function loadJSON() {
            fetch("knight5x5_full_1728_matrix.json")
                .then(r => r.json())
                .then(json => {
                    DATA = json;
                    console.log("JSON Loaded:", DATA);
                })
                .catch(err => alert("Gagal memuat JSON: " + err));
        }

        function renderBoard(matrix) {
            const board = document.getElementById("board");
            board.innerHTML = "";

            for (let r = 0; r < 5; r++) {
                for (let c = 0; c < 5; c++) {

                    let cell = document.createElement("div");
                    cell.classList.add("cell");
                    cell.classList.add((r + c) % 2 === 0 ? "dark" : "light");
                    cell.textContent = matrix[r][c];

                    board.appendChild(cell);
                }
            }
        }

        document.getElementById("groupSelect").addEventListener("change", function () {
            const group = this.value;
            const routeSelect = document.getElementById("routeSelect");

            if (!group || !DATA[group]) {
                routeSelect.disabled = true;
                routeSelect.innerHTML = "";
                return;
            }

            routeSelect.disabled = false;
            routeSelect.innerHTML = "";

            DATA[group].forEach((route, idx) => {
                let opt = document.createElement("option");
                opt.value = idx;
                opt.textContent = "Rute #" + (idx + 1);
                routeSelect.appendChild(opt);
            });

            routeSelect.dispatchEvent(new Event("change"));
        });

        document.getElementById("routeSelect").addEventListener("change", function () {
            const group = document.getElementById("groupSelect").value;
            const idx = this.value;

            if (!group || idx === "") return;

            renderBoard(DATA[group][idx]);
        });

        loadJSON();
    </script>

</body>

</html>